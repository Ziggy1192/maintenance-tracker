<div class="d-flex" data-controller="tasks" >
  <% if current_user.technician == false %>
  <%= render "shared/sidebar" %>
  <% end %>
    <div class="tasks-index flex-grow-1">
      <div class="filter-bar">
        <div class="btn-group">
          <button class="btn btn-primary btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" style="margin-left: 12px;">
            Sort by
          </button>
          <ul class="dropdown-menu">
            <li data-action="click->tasks#sortByName">Task Name</li>
            <li>Technician</li>
            <li>Date Due</li>
            <li>Network</li>
          </ul>
        </div>
        <label for="complete">Hide Complete Tasks</label>
        <input type="checkbox" data-action="click->tasks#hideComplete" name="complete">
      </div>
        <div class="all-tasks">
          <div class="task-info-header">
            <li>TASK NAME</li>
            <li>TECHNICIAN</li>
            <li>DUE DATE</li>
            <li>NETWORK</li>
            <li>STATUS</li>
          </div>
              <% @tasks.reverse.each do |task| %>
                <%= link_to task_path(task), class:"task-link" do %>
                <div class="single-task" data-tasks-target="hide" data-completed=<%= task.complete_task%> >
                  <li> <%= task.service.name %> </li>
                  <li> <%= task.technician.first_name.capitalize %> <%= task.technician.last_name.capitalize %></li>
                  <li> <%= task.end_date.strftime("%d/%m/%Y") %> </li>
                  <li> <%= task.network.name %> </li>
                  <li> <%= if task.complete_task
                  '<i class="fa-solid fa-circle"style="color: green;"></i> Complete'.html_safe
                  else
                  '<i class="fa-solid fa-circle" style="color: red;"></i> Incomplete'.html_safe
                  end %></li>
                </div>
                <% end %>
              <% end %>
        </div>
    </div>
</div>
